# Awesome Task Exchange System

Система представляет из себя таск-трекер для постановки задач за выполнение которых выплачивается вознаграждение
сотрудникам.

Она состоит из 4 независимых сервисов:

- auth: единый сервис аутентификации, используется OAuth 2
- tasks: сервис в котором создаются задачи и назначаются исполнители
- accounting: биллинг сервис в котором осуществляются выплаты за выполненые задачи
- analytics: сервис аналитики

Система создана в рамках курса по [асинхронной архитектуре](https://education.borshev.com/architecture).

## Запуск

Для запуска системы достаточно выполнить:

```bash
docker-compose up
```

это запустит все сервисы, кроме Consumer-ов, которые в случае необходимости, можно запустить командой:

```bash
docker-compose run tasks bundle exec racecar AccountsConsumer
```

где `tasks` это имя сервиса, а `AccountsConsumer` название Consumer-а.

Если нет необходимости запускать всю систему целиком, а требуется только какой-то конкретный сервис, то можно это
сделать командой:

```bash
docker-compose up tasks
```

где `tasks` это имя сервиса. Это запустит сам сервис и необходимые для его работы зависимости.

## Тестирование

Для запуска всех тестов сервиса необходимо выполнить `docker-compose run tasks bundle exec rspec`. Это запустит все
тесты. Для системных тестов будет использован браузер по умолчанию, хром. Если нужно запустить фаерфокс, то нужно
выполнить `docker-compose run -e TEST_BROWSER=firefox -e TEST_BROWSER_URL=http://firefox-server:4444 tasks bundle exec
rspec`.
